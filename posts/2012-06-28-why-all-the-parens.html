<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="me" href="https://mastodon.social/@yogthos">
    <link rel="me" href="https://mas.to/@yogthos">
    <link rel="me" href="https://social.marxist.network/@yogthos">
    <title>(iterate think thoughts): why all the parens</title>
    <meta name="description" content="Dmitri&#39;s blog about programming, Clojure, and software development">
    <meta name="keywords" content="">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="icon" type="image/png" href="/img/favicon.png">
    <link href="/css/site.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css" media="(prefers-color-scheme: light)" id="hljs-light">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/tomorrow-night-eighties.min.css" media="(prefers-color-scheme: dark)" id="hljs-dark">
    <script>
    (function(){var t=localStorage.getItem('theme');if(t){document.documentElement.setAttribute('data-theme',t);var l=document.getElementById('hljs-light'),d=document.getElementById('hljs-dark');if(l&&d){if(t==='dark'){l.media='not all';d.media='all'}else{l.media='all';d.media='not all'}}}})();
    </script>
</head>
<body>

<aside id="sidebar">

    <p id="logo">
        <a title="(iterate think thoughts)" href="/index.html">
            <span class="text"><span class="paren">(</span><span class="fn">iterate</span>
                <br>
                <span class="text">&nbsp;&nbsp;think</span>
                <br>
                <span class="text">&nbsp;&nbsp;thoughts<span class="paren">)</span>
            </span>
        </a>
    </p>

    <nav id="menucont" class="bodycontainer">
        <button class="menu-toggle" aria-label="Toggle menu">
            <span class="hamburger"></span>
            <span class="menu-label">Menu</span>
        </button>
        <ul class="menu">
            <li ><a title="Home" href="/index.html">Home</a></li>
            <li ><a title="Archives" href="/archives.html">Archives</a></li>
            
            <li ><a title="Tags" href="/tags.html">Tags</a></li>
            
            
            <li >
                <a href="/pages/about.html">About</a>
            </li>
            
            <li><a title="RSS" href="/feed.xml">RSS</a></li>
        </ul>
    </nav>

    <div class="theme-toggle-wrapper">
        <button class="theme-toggle" aria-label="Toggle dark mode">
            <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/></svg>
            <svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"/></svg>
            <span>Theme</span>
        </button>
    </div>
</aside>

<main id="content">
    
<div id="post">
    <article>
<div class="post-header">
    <div id="post-meta" class="row">
        <strong>June 28, 2012</strong>
        
    </div>
    <h1><a class="post-title" href="/posts/2012-06-28-why-all-the-parens.html">why all the parens</a></h1>
</div>
<div>
    
    <p>A common complaint you hear from people about Lisp is that there are too many parens. Let's compare what's involved in writing a Java method to writing a Clojure function:<pre><code class="java">    public static void foo&#40;String bar, Integer baz&#41; {
        System.out.println&#40;bar + &quot;, &quot; + baz&#41;;
    }
</code></pre></p><pre><code class="clojure">    &#40;defn foo &#91;bar baz&#93; 
      &#40;println bar &quot;, &quot; baz&#41;&#41;
</code></pre><p>The number of parens is exactly the same, but there's clearly more noise in the Java version. In my opinion the noise adds up and it distracts from the intent of the code. The more code you have the harder it is to tell what it's doing and conversely the harder it is to spot bugs in it. I'll illustrate this with a concrete example. </p><p>The problem is to display a formatted address given the fields representing it. Commonly an address has a street, a city, a postal code, and a country. We'll have to examine each of these pieces, remove the null and empty ones and insert some separator between them.</p><p>So given something like</p><pre><code>street: 1 Main street
city: Toronto
posal: A1B 2C3
country: Canada</code></pre><p>we'd like to output</p><pre><code>1 Main street, Toronto, A1B 2C3, Canada</code></pre><p>we should obviously handle empty fields and not have <em>,,</em> if the field isn't there, and we should make sure we handle nulls in case the whole address is null or some fields in the address are null.</p><p>Let's first examine how we would write this in Java:<pre><code class="java">    public static String concat&#40;String... strings&#41; {
        if &#40;null == strings&#41; return null;
        StringBuffer sb = new StringBuffer&#40;&#41;;
        for &#40;String s : strings&#41; {
            if &#40;null == s || s.equals&#40;&quot;&quot;&#41;&#41; continue;
            sb.append&#40;s&#41;;
            sb.append&#40;','&#41;;
        }
        String s =  sb.toString&#40;&#41;;
        return s.substring&#40;0, s.lastIndexOf&#40;','&#41;&#41;;
    }
</code></pre></p><ul><li>lines of code : 11</li><li>parens: 26</li><li>curly braces: 4</li><li>semicolons: 7</li><li>colons: 1</li><li>dots: 6</li></ul><p>Now let's compare this to Clojure:<pre><code class="clojure">    &#40;defn concat-fields &#91;&amp; fields&#93;
      &#40;apply str &#40;interpose &quot;,&quot; &#40;remove empty? fields&#41;&#41;&#41;&#41;
</code></pre></p><ul><li>lines of code : 2</li><li>parens: 8</li><li>brackets: 2</li></ul><p>The Clojure version has significantly less code, and a lot less noise. In addition, we didn't have to do any explicit null checks in our code, and we were able to write the complete solution simply by composing together functions from the standard library!</p><p>One very important difference between the Java version and the Clojure version is that the Java version talks about <strong>how</strong> something is being done, while the Clojure version talks about <strong>what</strong> is being done. In other words, we have to step through the Java version in our heads to understand what the code is doing. </p><p>In the Clojure version this step is not present because the code says what it's doing, and all the implementation details have been abstracted from us. This is code reuse at work, where we can write simple functions that do one thing well and chain them together to achieve complex functionality. </p><p>This bears a lot of resemblance with the Unix philosophy: "<a href='http://en.wikipedia.org/wiki/Unix_philosophy'>Write programs that do one thing and do it well. Write programs to work together. Write programs to handle text streams, because that is a universal interface.</a>" Except in our case we're dealing with functions instead of programs and common data structures as a universal interface in the language.</p>
</div>

<div id="post-tags">
    <br/>
    <b>Tags: </b>
    
    <a href="/clojure.html">clojure</a>
    
</div>

<br/>
</article>

    <div id="prev-next">
        
        <a class="button" href="/posts/2012-07-04-Temporally-oblivious.html">&laquo; Temporally oblivious</a>
        
        
        <a class="right button" href="/posts/2012-06-23-popularity-contests.html">popularity contests &raquo;</a>
        
    </div>

    


</div>

    <hr/>
    <footer id="footercont">Copyright &copy; 2026 Dmitri Sotnikov
        <p>Powered by <a href="http://cryogenweb.org">Cryogen</a></p>
    </footer>
</main>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="/js/scripts.js" type="text/javascript"></script>


</body>
</html>
